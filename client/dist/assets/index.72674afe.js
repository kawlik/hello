import{v as R,i as T,g as W,G as E,s as O,a as U,r as y,u as N,j as e,b as P,c as l,F as p,d as L,e as q,f as J,h as j,k as B,l as G,m as D,n as F,o as z,p as H,q as X,t as Y,R as K,w,N as V,x as Q,y as Z,H as ee,z as te,A as ne}from"./vendor.a5c0693e.js";const ae=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}};ae();function se(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:s,onRegisterError:o}=t;let c;const x=async(m=!0)=>{};return"serviceWorker"in navigator&&(c=new R("/hello/sw.js",{scope:"/hello/",type:"classic"}),c.addEventListener("activated",m=>{m.isUpdate?window.location.reload():i==null||i()}),c.register({immediate:n}).then(m=>{s==null||s(m)}).catch(m=>{o==null||o(m)})),x}se({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let k=null;const oe=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),k=t,window.dispatchEvent(oe)});async function C(){return new Promise((t,n)=>{if(k)return t(k);window.addEventListener("isInstallPromptReady",a=>t(k))})}var re={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};T(re);const I=W();async function le(t){let n=null;try{n=await U(I,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function ie(){const t=new E;return await le(t)}async function ce(){let t=null;try{t=await O(I)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var v={namespace:"hello",namespaces:{user:"user"}};function ue(t,n){const a=v.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function de(t){const n=v.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function pe(t){const n=v.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function me(t){const n=v.namespaces.user;ue(n,t)}function he(){const t=v.namespaces.user;return de(t)}function fe(){const t=v.namespaces.user;return pe(t)}var d={login:{name:"Login",path:"/login"},news:{name:"News",path:"/news"},user:{name:"User",path:"/user"},apps:{name:"Apps",path:"/apps",list:{test:{name:"Test",path:"/test"}}}};function be(t){return d.apps.path+t.path}const r={login:d.login.path,news:d.news.path,user:d.user.path,apps:d.apps.path,appTest:be(d.apps.list.test)},f={login:d.login.name,news:d.news.name,user:d.user.name,apps:d.apps.name,appTest:d.apps.list.test.name},ge={[r.login]:f.login,[r.news]:f.news,[r.user]:f.user,[r.apps]:f.apps,[r.appTest]:f.appTest};function S(t,n){return Boolean(t.pathname.match(n))}const M=y.exports.createContext();function A(){return y.exports.useContext(M)}function ye({children:t}){const n=N(),[a,i]=y.exports.useState(null);function s(u){!u||(i(u),n(r.user))}async function o(){const u=await ie();s(u)}async function c(){const u=await ce();s(u)}function x(){!a||(i(null),fe())}function m(){a&&me(a)}function h(){if(!a){const u=he();s(u)}}return y.exports.useEffect(()=>{m(),h(),a&&console.log(a)},[a]),e(M.Provider,{value:{user:a,loginWithGoogle:o,loginAnonymously:c,logout:x},children:t})}function we(){const{user:t}=A(),n=P(),a=N();return e("section",{className:"app-bar-bottom",children:t?l(p,{children:[l("button",{className:`btn ${S(n,r.news)?"active":""}`,onClick:()=>a(r.news),children:[e(L,{}),e("small",{className:"text-muted d-block",children:f.news})]}),l("button",{className:`btn ${S(n,r.apps)?"active":""}`,onClick:()=>a(r.apps),children:[e(q,{}),e("small",{className:"text-muted d-block",children:f.apps})]}),l("button",{className:`btn ${S(n,r.user)?"active":""}`,onClick:()=>a(r.user),children:[e(J,{}),e("small",{className:"text-muted d-block",children:f.user})]})]}):e(p,{children:l("button",{className:"btn",onClick:()=>{},children:[e(j,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function ve(){const{user:t,logout:n}=A(),a=P(),i=N();return e("section",{className:"app-bar-top",children:t?l(p,{children:[l("button",{className:"btn",onClick:()=>i(-1),children:[e(B,{}),e("small",{className:"text-muted align-middle p-2",children:ge[a.pathname]})]}),e("button",{className:"btn",onClick:()=>n(),children:e(G,{})})]}):e(p,{children:l("button",{className:"btn",children:[e(D,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function xe({name:t,path:n,children:a,icon:i}){const s=N();return l("button",{className:"app-btn-app btn btn-light",onClick:()=>s(n),children:[i,e("small",{className:"text-muted d-block",children:t})]})}function Ne(){return e(p,{children:e("section",{id:"apps-container",children:e(xe,{name:f.appTest,path:r.appTest,icon:e(F,{})})})})}function Ae(){const{loginWithGoogle:t,loginAnonymously:n,logout:a}=A();return y.exports.useEffect(()=>{a()},[]),e(p,{children:l("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(z,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(H,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(X,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(Y,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function ke(){return e(p,{})}function $e(){return A(),e(p,{})}function Se(){return e(p,{})}const b={x:null,y:null};function Pe(t){b.x=t.touches[0].clientX,b.y=t.touches[0].clientY}function _e(t,n,a,i,s){if(!b.x||!b.y)return;const o=Math.min(window.innerWidth/3,300),c=.33,x=t.touches[0].clientX,m=t.touches[0].clientY,h=b.x-x,u=b.y-m;if(Math.abs(h)>Math.abs(u)){const _=h<=0?1:-1,$=Math.max(1-(Math.abs(h)-Math.abs(u))/o,0),g=_*c*(Math.abs(h)-Math.abs(u));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=$,document.querySelector(n).style.transform=`translateX( ${g}px )`}if(Math.abs(h)>Math.abs(u)&&Math.abs(h)-Math.abs(u)>o){const $=a.length-1,g=a.indexOf(i.pathname.split(/\b\//)[0]);if(g===-1)return;if(h<0&&g-1>=0)return s(a[g-1]);if(h>0&&g+1<=$)return s(a[g+1])}}function Ce(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,b.x=null,b.y=null}function Ie(){const{user:t}=A(),n=P(),a=N();function i(c){Pe(c)}function s(c){_e(c,"#app-main-content",[r.news,r.apps,r.user],n,a)}function o(c){Ce(c,"#app-main-content")}return e("main",{id:"app-main-content",onTouchStart:i,onTouchMove:s,onTouchEnd:o,children:l(K,{children:[e(w,{exact:!0,path:r.login,element:e(Ae,{})}),t&&l(p,{children:[e(w,{exact:!0,path:r.news,element:e(ke,{})}),e(w,{exact:!0,path:r.user,element:e($e,{})}),e(w,{exact:!0,path:r.apps,element:e(Ne,{})}),e(w,{exact:!0,path:r.appTest,element:e(Se,{})})]}),e(w,{path:"*",element:e(V,{replace:!0,to:r.login})})]})},n.pathname)}function Me({installPWA:t,dismiss:n}){return l("section",{className:"app-pwa-install",children:[l("button",{className:"btn btn-dark shadow",onClick:()=>t(),children:[e(Q,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),l("button",{className:"btn btn-secondary shadow",onClick:()=>n(),children:[e(Z,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function Re(){const[t,n]=y.exports.useState(!1);async function a(){const s=await C();s.prompt();const{outcome:o}=await s.userChoice;o==="accepted"&&i()}function i(){n(!1)}return y.exports.useEffect(async()=>{await C(),n(!0)},[]),e(p,{children:e(ee,{children:l(ye,{children:[e(ve,{}),t&&e(Me,{installPWA:a,dismiss:i}),e(Ie,{}),e(we,{})]})})})}te.render(e(ne.StrictMode,{children:e(Re,{})}),document.getElementById("root"));
