import{v as M,i as T,g as U,G as W,s as E,a as O,r as y,u as x,j as e,b as P,c as l,F as p,d as L,e as q,f as B,h as G,k as J,l as j,m as D,n as F,o as z,p as H,q as X,t as Y,w as K,x as V,R as Q,y as w,N as Z,z as ee,A as te,H as ne,B as ae,C as se}from"./vendor.56f6ffe2.js";const oe=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}};oe();function le(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:c,onRegistered:s,onRegisterError:o}=t;let r;const v=async(m=!0)=>{};return"serviceWorker"in navigator&&(r=new M("/hello/sw.js",{scope:"/hello/",type:"classic"}),r.addEventListener("activated",m=>{m.isUpdate?window.location.reload():c==null||c()}),r.register({immediate:n}).then(m=>{s==null||s(m)}).catch(m=>{o==null||o(m)})),v}le({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let k=null;const ie=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),k=t,window.dispatchEvent(ie)});async function C(){return new Promise((t,n)=>{if(k)return t(k);window.addEventListener("isInstallPromptReady",a=>t(k))})}var ce={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};T(ce);const I=U();async function re(t){let n=null;try{n=await O(I,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function ue(){const t=new W;return await re(t)}async function de(){let t=null;try{t=await E(I)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var N={namespace:"hello",namespaces:{user:"user"}};function pe(t,n){const a=N.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function me(t){const n=N.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function he(t){const n=N.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function fe(t){const n=N.namespaces.user;pe(n,t)}function be(){const t=N.namespaces.user;return me(t)}function ge(){const t=N.namespaces.user;return he(t)}var d={login:{name:"Login",path:"/login"},news:{name:"News",path:"/news"},user:{name:"User",path:"/user"},apps:{name:"Apps",path:"/apps",list:{test:{name:"Test",path:"/test"}}}};function ye(t){return d.apps.path+t.path}const i={login:d.login.path,news:d.news.path,user:d.user.path,apps:d.apps.path,appTest:ye(d.apps.list.test)},f={login:d.login.name,news:d.news.name,user:d.user.name,apps:d.apps.name,appTest:d.apps.list.test.name},we={[i.login]:f.login,[i.news]:f.news,[i.user]:f.user,[i.apps]:f.apps,[i.appTest]:f.appTest};function S(t,n){return Boolean(t.pathname.match(n))}const R=y.exports.createContext();function A(){return y.exports.useContext(R)}function Ne({children:t}){const n=x(),[a,c]=y.exports.useState(null);function s(u){!u||(c(u),n(i.user))}async function o(){const u=await ue();s(u)}async function r(){const u=await de();s(u)}function v(){!a||(c(null),ge())}function m(){a&&fe(a)}function h(){if(!a){const u=be();s(u)}}return y.exports.useEffect(()=>{m(),h(),a&&console.log(a)},[a]),e(R.Provider,{value:{user:a,loginWithGoogle:o,loginAnonymously:r,logout:v},children:t})}function ve(){const{user:t}=A(),n=P(),a=x();return e("section",{className:"app-bar-bottom",children:t?l(p,{children:[l("button",{className:`btn ${S(n,i.news)?"active":""}`,onClick:()=>a(i.news),children:[e(L,{}),e("small",{className:"text-muted d-block",children:f.news})]}),l("button",{className:`btn ${S(n,i.apps)?"active":""}`,onClick:()=>a(i.apps),children:[e(q,{}),e("small",{className:"text-muted d-block",children:f.apps})]}),l("button",{className:`btn ${S(n,i.user)?"active":""}`,onClick:()=>a(i.user),children:[e(B,{}),e("small",{className:"text-muted d-block",children:f.user})]})]}):e(p,{children:l("button",{className:"btn",onClick:()=>{},children:[e(G,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function xe(){const{user:t,logout:n}=A(),a=P(),c=x();return e("section",{className:"app-bar-top",children:t?l(p,{children:[l("button",{className:"btn",onClick:()=>c(-1),children:[e(J,{}),e("small",{className:"text-muted align-middle p-2",children:we[a.pathname]})]}),e("button",{className:"btn",onClick:()=>n(),children:e(j,{})})]}):e(p,{children:l("button",{className:"btn",children:[e(D,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function Ae({name:t,path:n,children:a,icon:c}){const s=x();return l("button",{className:"app-btn-app btn btn-light",onClick:()=>s(n),children:[c,e("small",{className:"text-muted d-block",children:t})]})}function ke(){return e(p,{children:e("section",{id:"apps-container",children:e(Ae,{name:f.appTest,path:i.appTest,icon:e(F,{})})})})}function $e(){const{loginWithGoogle:t,loginAnonymously:n,logout:a}=A();return y.exports.useEffect(()=>{a()},[]),e(p,{children:l("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(z,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(H,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(X,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(Y,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function Se(){return e(p,{})}var Pe="/hello/assets/anonymous.20c3dde4.png";function _e({user:t}){return l("section",{className:"app-user-view",children:[e("img",{src:(t==null?void 0:t.photoURL)||Pe,alt:(t==null?void 0:t.displayName)||"Anonymous",className:"user-photo"}),e("h2",{className:"lead mb-4",children:(t==null?void 0:t.displayName)||"Anonymous"}),e("div",{className:"info-block",children:l("button",{className:"btn btn-dark btn-id",children:[e(K,{}),e("small",{className:"ms-2",children:"Get ID"})]})}),e("div",{className:"info-block",children:l("button",{className:"btn btn-dark btn-id",children:[e(V,{}),e("small",{className:"ms-2",children:"Share"})]})})]})}function Ce(){const{user:t}=A();return e(p,{children:e(_e,{user:t})})}function Ie(){return e(p,{})}const b={x:null,y:null};function Re(t){b.x=t.touches[0].clientX,b.y=t.touches[0].clientY}function Me(t,n,a,c,s){if(!b.x||!b.y)return;const o=Math.min(window.innerWidth/3,300),r=.33,v=t.touches[0].clientX,m=t.touches[0].clientY,h=b.x-v,u=b.y-m;if(Math.abs(h)>Math.abs(u)){const _=h<=0?1:-1,$=Math.max(1-(Math.abs(h)-Math.abs(u))/o,0),g=_*r*(Math.abs(h)-Math.abs(u));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=$,document.querySelector(n).style.transform=`translateX( ${g}px )`}if(Math.abs(h)>Math.abs(u)&&Math.abs(h)-Math.abs(u)>o){const $=a.length-1,g=a.indexOf(c.pathname.split(/\b\//)[0]);if(g===-1)return;if(h<0&&g-1>=0)return s(a[g-1]);if(h>0&&g+1<=$)return s(a[g+1])}}function Te(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,b.x=null,b.y=null}function Ue(){const{user:t}=A(),n=P(),a=x();function c(r){Re(r)}function s(r){Me(r,"#app-main-content",[i.news,i.apps,i.user],n,a)}function o(r){Te(r,"#app-main-content")}return e("main",{id:"app-main-content",onTouchStart:c,onTouchMove:s,onTouchEnd:o,children:l(Q,{children:[e(w,{exact:!0,path:i.login,element:e($e,{})}),t&&l(p,{children:[e(w,{exact:!0,path:i.news,element:e(Se,{})}),e(w,{exact:!0,path:i.user,element:e(Ce,{})}),e(w,{exact:!0,path:i.apps,element:e(ke,{})}),e(w,{exact:!0,path:i.appTest,element:e(Ie,{})})]}),e(w,{path:"*",element:e(Z,{replace:!0,to:i.login})})]})},n.pathname)}function We({installPWA:t,dismiss:n}){return l("section",{className:"app-pwa-install",children:[l("button",{className:"btn btn-dark shadow",onClick:()=>t(),children:[e(ee,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),l("button",{className:"btn btn-secondary shadow",onClick:()=>n(),children:[e(te,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function Ee(){const[t,n]=y.exports.useState(!1);async function a(){const s=await C();s.prompt();const{outcome:o}=await s.userChoice;o==="accepted"&&c()}function c(){n(!1)}return y.exports.useEffect(async()=>{await C(),n(!0)},[]),e(p,{children:e(ne,{children:l(Ne,{children:[e(xe,{}),t&&e(We,{installPWA:a,dismiss:c}),e(Ue,{}),e(ve,{})]})})})}ae.render(e(se.StrictMode,{children:e(Ee,{})}),document.getElementById("root"));
