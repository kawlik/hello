import{v as x,i as A,g as k,G as P,s as C,a as I,r as u,j as e,u as y,b as l,F as m,d as $,c as R,e as S,f as W,h as _,k as O,l as U,m as E,n as L,o as G,p as J,q as j,R as B,t as f,N as D,w as M,x as F,H as z,y as H,z as q}from"./vendor.79bee38d.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}};K();function T(t={}){const{immediate:n=!1,onNeedRefresh:s,onOfflineReady:i,onRegistered:a,onRegisterError:o}=t;let d;const b=async(r=!0)=>{};return"serviceWorker"in navigator&&(d=new x("/hello/sw.js",{scope:"/hello/",type:"classic"}),d.addEventListener("activated",r=>{r.isUpdate?window.location.reload():i==null||i()}),d.register({immediate:n}).then(r=>{a==null||a(r)}).catch(r=>{o==null||o(r)})),b}T({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let h=null;const V=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),h=t,window.dispatchEvent(V)});async function N(){return new Promise((t,n)=>{if(h)return t(h);window.addEventListener("isInstallPromptReady",s=>t(h))})}var Y={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};A(Y);const v=k();async function Q(t){let n=null;try{n=await I(v,t)}catch(s){console.error(s)}finally{return(n==null?void 0:n.user)||null}}async function X(){const t=new P;return await Q(t)}async function Z(){let t=null;try{t=await C(v)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var p={namespace:"hello",namespaces:{user:"user"}};function ee(t,n){const s=p.namespace+"."+t;localStorage.setItem(s,JSON.stringify(n))}function te(t){const n=p.namespace+"."+t,s=localStorage.getItem(n);return JSON.parse(s)||null}function ne(t){const n=p.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function ae(t){const n=p.namespaces.user;ee(n,t)}function se(){const t=p.namespaces.user;return te(t)}function oe(){const t=p.namespaces.user;return ne(t)}const w=u.exports.createContext();function g(){return u.exports.useContext(w)}function le({children:t}){const[n,s]=u.exports.useState(null);async function i(){const r=await X();r&&s(r)}async function a(){const r=await Z();r&&s(r)}function o(){s(null),oe()}function d(){n&&ae(n)}function b(){if(!n){const r=se();r&&s(r)}}return u.exports.useEffect(()=>{d(),b()},[n]),e(w.Provider,{value:{user:n,loginWithGoogle:i,loginAnonymously:a,logout:o},children:t})}var c={login:"/login",profile:"/profile",messages:"/messages",apps:"/apps"};function re(){const{user:t}=g(),n=y();return e("section",{className:"app-bar-bottom",children:t?l(m,{children:[l("button",{className:"btn",onClick:()=>n(c.messages),children:[e($,{}),e("small",{className:"text-muted d-block",children:"Messages"})]}),l("button",{className:"btn",onClick:()=>n(c.apps),children:[e(R,{}),e("small",{className:"text-muted d-block",children:"Apps"})]}),l("button",{className:"btn",onClick:()=>n(c.profile),children:[e(S,{}),e("small",{className:"text-muted d-block",children:"Profile"})]})]}):e(m,{children:l("button",{className:"btn",onClick:()=>{},children:[e(W,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})})}function ie(){const{user:t,logout:n}=g(),s=y();return e("section",{className:"app-bar-top",children:t?l(m,{children:[l("button",{className:"btn",onClick:()=>s(-1),children:[e(_,{}),e("small",{className:"text-muted align-middle p-2",children:"Go back"})]}),e("button",{className:"btn",onClick:()=>n(),children:e(O,{})})]}):e(m,{children:l("button",{className:"btn",children:[e(U,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})})}function ce(){const{loginWithGoogle:t,loginAnonymously:n}=g();return e(m,{children:l("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(E,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(L,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(G,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(J,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function de(){const{user:t}=g(),n=j(),s=y();return u.exports.useEffect(()=>{s(t?c.apps:c.login)},[t]),e("main",{id:"app-main-content",children:l(B,{children:[e(f,{exact:!0,path:c.login,element:e(ce,{})}),e(f,{exact:!0,path:c.profile,element:e("h2",{children:"Profile"})}),e(f,{exact:!0,path:c.messages,element:e("h2",{children:"Messages"})}),e(f,{exact:!0,path:c.apps,element:e("h2",{children:"Apps"})}),e(f,{path:"*",element:e(D,{replace:!0,to:c.login})})]})},n.pathname)}function ue({installPWA:t,dismiss:n}){return l("section",{className:"app-pwa-install",children:[l("button",{className:"btn btn-outline-dark",onClick:()=>t(),children:[e(M,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),l("button",{className:"btn btn-outline-secondary",onClick:()=>n(),children:[e(F,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function me(){const[t,n]=u.exports.useState(!1);async function s(){const a=await N();a.prompt();const{outcome:o}=await a.userChoice;o==="accepted"&&i()}function i(){n(!1)}return u.exports.useEffect(async()=>{await N(),n(!0)},[]),e(m,{children:e(z,{children:l(le,{children:[e(ie,{}),t&&e(ue,{installPWA:s,dismiss:i}),e(de,{}),e(re,{})]})})})}H.render(e(q.StrictMode,{children:e(me,{})}),document.getElementById("root"));
