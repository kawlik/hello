import{v as _,i as C,g as I,G as R,s as W,a as E,r as p,j as e,u as S,b as A,c as l,F as h,d as O,e as U,f as L,h as q,k as G,l as J,m as T,n as j,o as B,p as D,q as F,R as z,t as v,N as H,w as X,x as Y,H as K,y as V,z as Q}from"./vendor.dbf24a81.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}};Z();function ee(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:s,onRegisterError:o}=t;let r;const b=async(c=!0)=>{};return"serviceWorker"in navigator&&(r=new _("/hello/sw.js",{scope:"/hello/",type:"classic"}),r.addEventListener("activated",c=>{c.isUpdate?window.location.reload():i==null||i()}),r.register({immediate:n}).then(c=>{s==null||s(c)}).catch(c=>{o==null||o(c)})),b}ee({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let x=null;const te=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),x=t,window.dispatchEvent(te)});async function P(){return new Promise((t,n)=>{if(x)return t(x);window.addEventListener("isInstallPromptReady",a=>t(x))})}var ne={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};C(ne);const $=I();async function ae(t){let n=null;try{n=await E($,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function se(){const t=new R;return await ae(t)}async function oe(){let t=null;try{t=await W($)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var g={namespace:"hello",namespaces:{user:"user"}};function le(t,n){const a=g.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function ie(t){const n=g.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function re(t){const n=g.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function ce(t){const n=g.namespaces.user;le(n,t)}function ue(){const t=g.namespaces.user;return ie(t)}function de(){const t=g.namespaces.user;return re(t)}const M=p.exports.createContext();function N(){return p.exports.useContext(M)}function me({children:t}){const[n,a]=p.exports.useState(null);async function i(){const c=await se();c&&a(c)}async function s(){const c=await oe();c&&a(c)}function o(){a(null),de()}function r(){n&&ce(n)}function b(){if(!n){const c=ue();c&&a(c)}}return p.exports.useEffect(()=>{r(),b()},[n]),e(M.Provider,{value:{user:n,loginWithGoogle:i,loginAnonymously:s,logout:o},children:t})}var u={login:"/login",profile:"/profile",messages:"/messages",apps:"/apps"};function pe(){const{user:t}=N(),n=S(),a=A();return e("section",{className:"app-bar-bottom",children:t?l(h,{children:[l("button",{className:`btn ${n.pathname.match(u.messages)?"active":""}`,onClick:()=>a(u.messages),children:[e(O,{}),e("small",{className:"text-muted d-block",children:"Messages"})]}),l("button",{className:`btn ${n.pathname.match(u.apps)?"active":""}`,onClick:()=>a(u.apps),children:[e(U,{}),e("small",{className:"text-muted d-block",children:"Apps"})]}),l("button",{className:`btn ${n.pathname.match(u.profile)?"active":""}`,onClick:()=>a(u.profile),children:[e(L,{}),e("small",{className:"text-muted d-block",children:"Profile"})]})]}):e(h,{children:l("button",{className:"btn",onClick:()=>{},children:[e(q,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function fe(){const{user:t,logout:n}=N(),a=A();return e("section",{className:"app-bar-top",children:t?l(h,{children:[l("button",{className:"btn",onClick:()=>a(-1),children:[e(G,{}),e("small",{className:"text-muted align-middle p-2",children:"Go back"})]}),e("button",{className:"btn",onClick:()=>n(),children:e(J,{})})]}):e(h,{children:l("button",{className:"btn",children:[e(T,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function he(){const{loginWithGoogle:t,loginAnonymously:n}=N();return e(h,{children:l("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(j,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(B,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(D,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(F,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}const m={x:null,y:null};function ge(t){m.x=t.touches[0].clientX,m.y=t.touches[0].clientY}function be(t,n,a,i,s){if(!m.x||!m.y)return;const o=Math.min(window.innerWidth/3,300),r=.33,b=t.touches[0].clientX,c=t.touches[0].clientY,d=m.x-b,y=m.y-c;if(Math.abs(d)>Math.abs(y)){const k=d<=0?1:-1,w=Math.max(1-(Math.abs(d)-Math.abs(y))/o,0),f=k*r*(Math.abs(d)-Math.abs(y));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=w,document.querySelector(n).style.transform=`translateX( ${f}px )`}if(Math.abs(d)>Math.abs(y)&&Math.abs(d)-Math.abs(y)>o){const w=i.length-1,f=i.indexOf(a);if(d<0&&f-1>=0)return s(i[f-1]);if(d>0&&f+1<=w)return s(i[f+1])}}function ye(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,m.x=null,m.y=null}function ve(){const{user:t}=N(),n=S(),a=A();function i(r){ge(r)}function s(r){be(r,"#app-main-content",n.pathname,[u.messages,u.apps,u.profile],a)}function o(r){ye(r,"#app-main-content")}return p.exports.useEffect(()=>{a(t?u.apps:u.login)},[t]),e("main",{id:"app-main-content",onTouchStart:i,onTouchMove:s,onTouchEnd:o,children:l(z,{children:[e(v,{exact:!0,path:u.login,element:e(he,{})}),e(v,{exact:!0,path:u.messages,element:e("h2",{children:"Messages"})}),e(v,{exact:!0,path:u.apps,element:e("h2",{children:"Apps"})}),e(v,{exact:!0,path:u.profile,element:e("h2",{children:"Profile"})}),e(v,{path:"*",element:e(H,{replace:!0,to:u.login})})]})},n.pathname)}function xe({installPWA:t,dismiss:n}){return l("section",{className:"app-pwa-install",children:[l("button",{className:"btn btn-outline-dark",onClick:()=>t(),children:[e(X,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),l("button",{className:"btn btn-outline-secondary",onClick:()=>n(),children:[e(Y,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function Ne(){const[t,n]=p.exports.useState(!1);async function a(){const s=await P();s.prompt();const{outcome:o}=await s.userChoice;o==="accepted"&&i()}function i(){n(!1)}return p.exports.useEffect(async()=>{await P(),n(!0)},[]),e(h,{children:e(K,{children:l(me,{children:[e(fe,{}),t&&e(xe,{installPWA:a,dismiss:i}),e(ve,{}),e(pe,{})]})})})}V.render(e(Q.StrictMode,{children:e(Ne,{})}),document.getElementById("root"));
