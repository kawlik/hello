import{v as M,i as T,g as U,G as E,s as W,a as O,r as y,u as x,j as e,b as _,c as o,F as p,d as L,e as q,f as B,h as D,k as G,l as J,m as j,n as F,o as z,p as H,q as X,t as Y,w as K,x as V,y as Q,R as Z,z as N,N as ee,A as te,B as ne,H as ae,C as se,D as oe}from"./vendor.09308b3f.js";const le=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}};le();function re(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:s,onRegisterError:l}=t;let c;const v=async(m=!0)=>{};return"serviceWorker"in navigator&&(c=new M("/hello/sw.js",{scope:"/hello/",type:"classic"}),c.addEventListener("activated",m=>{m.isUpdate?window.location.reload():i==null||i()}),c.register({immediate:n}).then(m=>{s==null||s(m)}).catch(m=>{l==null||l(m)})),v}re({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let k=null;const ie=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),k=t,window.dispatchEvent(ie)});async function C(){return new Promise((t,n)=>{if(k)return t(k);window.addEventListener("isInstallPromptReady",a=>t(k))})}var ce={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};T(ce);const I=U();async function ue(t){let n=null;try{n=await O(I,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function de(){const t=new E;return await ue(t)}async function pe(){let t=null;try{t=await W(I)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var w={namespace:"hello",namespaces:{user:"user"}};function me(t,n){const a=w.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function he(t){const n=w.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function fe(t){const n=w.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function be(t){const n=w.namespaces.user;me(n,t)}function ge(){const t=w.namespaces.user;return he(t)}function ye(){const t=w.namespaces.user;return fe(t)}var d={login:{name:"Login",path:"/login"},news:{name:"News",path:"/news"},user:{name:"User",path:"/user"},apps:{name:"Apps",path:"/apps",list:{test:{name:"Test",path:"/test"}}}};function Ne(t){return d.apps.path+t.path}const r={login:d.login.path,news:d.news.path,user:d.user.path,apps:d.apps.path,appTest:Ne(d.apps.list.test)},f={login:d.login.name,news:d.news.name,user:d.user.name,apps:d.apps.name,appTest:d.apps.list.test.name},we={[r.login]:f.login,[r.news]:f.news,[r.user]:f.user,[r.apps]:f.apps,[r.appTest]:f.appTest};function S(t,n){return Boolean(t.pathname.match(n))}const R=y.exports.createContext();function A(){return y.exports.useContext(R)}function ve({children:t}){const n=x(),[a,i]=y.exports.useState(null);function s(u){!u||(i(u),n(r.user))}async function l(){const u=await de();s(u)}async function c(){const u=await pe();s(u)}function v(){!a||(i(null),ye())}function m(){a&&be(a)}function h(){if(!a){const u=ge();s(u)}}return y.exports.useEffect(()=>{m(),h(),a&&console.log(a)},[a]),e(R.Provider,{value:{user:a,loginWithGoogle:l,loginAnonymously:c,logout:v},children:t})}function xe(){const{user:t}=A(),n=_(),a=x();return e("section",{className:"app-bar-bottom",children:t?o(p,{children:[o("button",{className:`btn ${S(n,r.news)?"active":""}`,onClick:()=>a(r.news),children:[e(L,{}),e("small",{className:"text-muted d-block",children:f.news})]}),o("button",{className:`btn ${S(n,r.apps)?"active":""}`,onClick:()=>a(r.apps),children:[e(q,{}),e("small",{className:"text-muted d-block",children:f.apps})]}),o("button",{className:`btn ${S(n,r.user)?"active":""}`,onClick:()=>a(r.user),children:[e(B,{}),e("small",{className:"text-muted d-block",children:f.user})]})]}):e(p,{children:o("button",{className:"btn",onClick:()=>{},children:[e(D,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function Ae(){const{user:t,logout:n}=A(),a=_(),i=x();return e("section",{className:"app-bar-top",children:t?o(p,{children:[o("button",{className:"btn",onClick:()=>i(-1),children:[e(G,{}),e("small",{className:"text-muted align-middle p-2",children:we[a.pathname]})]}),e("button",{className:"btn",onClick:()=>n(),children:e(J,{})})]}):e(p,{children:o("button",{className:"btn",children:[e(j,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function ke({name:t,path:n,children:a,icon:i}){const s=x();return o("button",{className:"app-btn-app btn btn-light",onClick:()=>s(n),children:[i,e("small",{className:"text-muted d-block",children:t})]})}function $e(){return e(p,{children:e("section",{id:"apps-container",children:e(ke,{name:f.appTest,path:r.appTest,icon:e(F,{})})})})}function Se(){const{loginWithGoogle:t,loginAnonymously:n,logout:a}=A();return y.exports.useEffect(()=>{a()},[]),e(p,{children:o("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(z,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(H,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(X,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(Y,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function _e(){return e(p,{})}var Pe="/hello/assets/anonymous.20c3dde4.png";function Ce({user:t}){return o("section",{className:"app-user-view",children:[e("img",{src:(t==null?void 0:t.photoURL)||Pe,alt:(t==null?void 0:t.displayName)||"Anonymous",className:"user-photo"}),e("h2",{className:"lead mb-4",children:(t==null?void 0:t.displayName)||"Anonymous"}),e("div",{className:"info-block",children:o("button",{className:"btn btn-dark btn-id",children:[e(K,{}),e("small",{className:"ms-2",children:"Get ID"})]})}),e("div",{className:"info-block",children:o("button",{className:"btn btn-dark btn-id",children:[e(V,{}),e("small",{className:"ms-2",children:"Share"})]})})]})}function Ie(){return o("section",{className:"app-add-friend",children:[o("form",{className:"input-group",children:[e("input",{type:"text",className:"form-control",placeholder:"Enter user name or ID"}),e("span",{class:"input-group-text",children:e(Q,{})})]}),e("div",{className:"result p-1"})]})}function Re(){const{user:t}=A();return o(p,{children:[e(Ie,{}),e(Ce,{user:t})]})}function Me(){return e(p,{})}const b={x:null,y:null};function Te(t){b.x=t.touches[0].clientX,b.y=t.touches[0].clientY}function Ue(t,n,a,i,s){if(!b.x||!b.y)return;const l=Math.min(window.innerWidth/3,300),c=.33,v=t.touches[0].clientX,m=t.touches[0].clientY,h=b.x-v,u=b.y-m;if(Math.abs(h)>Math.abs(u)){const P=h<=0?1:-1,$=Math.max(1-(Math.abs(h)-Math.abs(u))/l,0),g=P*c*(Math.abs(h)-Math.abs(u));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=$,document.querySelector(n).style.transform=`translateX( ${g}px )`}if(Math.abs(h)>Math.abs(u)&&Math.abs(h)-Math.abs(u)>l){const $=a.length-1,g=a.indexOf(i.pathname.split(/\b\//)[0]);if(g===-1)return;if(h<0&&g-1>=0)return s(a[g-1]);if(h>0&&g+1<=$)return s(a[g+1])}}function Ee(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,b.x=null,b.y=null}function We(){const{user:t}=A(),n=_(),a=x();function i(c){Te(c)}function s(c){Ue(c,"#app-main-content",[r.news,r.apps,r.user],n,a)}function l(c){Ee(c,"#app-main-content")}return e("main",{id:"app-main-content",onTouchStart:i,onTouchMove:s,onTouchEnd:l,children:o(Z,{children:[e(N,{exact:!0,path:r.login,element:e(Se,{})}),t&&o(p,{children:[e(N,{exact:!0,path:r.news,element:e(_e,{})}),e(N,{exact:!0,path:r.user,element:e(Re,{})}),e(N,{exact:!0,path:r.apps,element:e($e,{})}),e(N,{exact:!0,path:r.appTest,element:e(Me,{})})]}),e(N,{path:"*",element:e(ee,{replace:!0,to:r.login})})]})},n.pathname)}function Oe({installPWA:t,dismiss:n}){return o("section",{className:"app-pwa-install",children:[o("button",{className:"btn btn-dark shadow",onClick:()=>t(),children:[e(te,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),o("button",{className:"btn btn-secondary shadow",onClick:()=>n(),children:[e(ne,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function Le(){const[t,n]=y.exports.useState(!1);async function a(){const s=await C();s.prompt();const{outcome:l}=await s.userChoice;l==="accepted"&&i()}function i(){n(!1)}return y.exports.useEffect(async()=>{await C(),n(!0)},[]),e(p,{children:e(ae,{children:o(ve,{children:[e(Ae,{}),t&&e(Oe,{installPWA:a,dismiss:i}),e(We,{}),e(xe,{})]})})})}se.render(e(oe.StrictMode,{children:e(Le,{})}),document.getElementById("root"));
