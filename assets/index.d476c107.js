import{v as M,i as T,g as q,G as E,s as W,a as O,r as y,u as v,j as e,b as _,c as r,F as p,d as L,e as D,f as j,h as B,k as G,l as J,m as Q,n as F,o as z,p as H,q as X,t as Y,w as K,x as V,y as Z,z as ee,A as te,_ as ne,R as ae,B as b,N as se,C as oe,D as re,H as le,E as ie,I as ce}from"./vendor.de376d9a.js";const ue=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}};ue();function de(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:s,onRegisterError:l}=t;let u;const A=async(h=!0)=>{};return"serviceWorker"in navigator&&(u=new M("/hello/sw.js",{scope:"/hello/",type:"classic"}),u.addEventListener("activated",h=>{h.isUpdate?window.location.reload():i==null||i()}),u.register({immediate:n}).then(h=>{s==null||s(h)}).catch(h=>{l==null||l(h)})),A}de({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let $=null;const pe=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),$=t,window.dispatchEvent(pe)});async function I(){return new Promise((t,n)=>{if($)return t($);window.addEventListener("isInstallPromptReady",a=>t($))})}var me={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};T(me);const P=q();async function he(t){let n=null;try{n=await O(P,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function fe(){const t=new E;return await he(t)}async function be(){let t=null;try{t=await W(P)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var w={namespace:"hello",namespaces:{user:"user"}};function ge(t,n){const a=w.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function ye(t){const n=w.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function Ne(t){const n=w.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function ve(t){const n=w.namespaces.user;ge(n,t)}function we(){const t=w.namespaces.user;return ye(t)}function xe(){const t=w.namespaces.user;return Ne(t)}var c={login:{name:"Login",path:"/login"},news:{name:"News",path:"/news"},user:{name:"User",path:"/user",list:{add:{name:"Add new firend",path:"/add"},qrs:{name:"QR code scaner",path:"/qrs"},uid:{name:"User ID",path:"/uid"}}},apps:{name:"Apps",path:"/apps",list:{test:{name:"Test",path:"/test"}}}};function k(t,n){return t.path+n.path}const o={login:c.login.path,news:c.news.path,user:c.user.path,userAdd:k(c.user,c.user.list.add),userQrs:k(c.user,c.user.list.qrs),userUid:k(c.user,c.user.list.uid),apps:c.apps.path,appTest:k(c.apps,c.apps.list.test)},m={login:c.login.name,news:c.news.name,user:c.user.name,userAdd:c.user.list.add.name,userQrs:c.user.list.qrs.name,userUid:c.user.list.uid.name,apps:c.apps.name,appTest:c.apps.list.test.name},Ae={[o.login]:m.login,[o.news]:m.news,[o.user]:m.user,[o.userAdd]:m.userAdd,[o.userQrs]:m.userQrs,[o.userUid]:m.userUid,[o.apps]:m.apps,[o.appTest]:m.appTest};function S(t,n){return Boolean(t.pathname.match(n))}const R=y.exports.createContext();function x(){return y.exports.useContext(R)}function ke({children:t}){const n=v(),[a,i]=y.exports.useState(null);function s(d){!d||(i(d),n(o.user))}async function l(){const d=await fe();s(d)}async function u(){const d=await be();s(d)}function A(){!a||(i(null),xe())}function h(){a&&ve(a)}function f(){if(!a){const d=we();s(d)}}return y.exports.useEffect(()=>{h(),f(),a&&console.log(a)},[a]),e(R.Provider,{value:{user:a,loginWithGoogle:l,loginAnonymously:u,logout:A},children:t})}function $e(){const{user:t}=x(),n=_(),a=v();return e("section",{className:"app-bar-bottom",children:t?r(p,{children:[r("button",{className:`btn ${S(n,o.news)?"active":""}`,onClick:()=>a(o.news),children:[e(L,{}),e("small",{className:"text-muted d-block",children:m.news})]}),r("button",{className:`btn ${S(n,o.apps)?"active":""}`,onClick:()=>a(o.apps),children:[e(D,{}),e("small",{className:"text-muted d-block",children:m.apps})]}),r("button",{className:`btn ${S(n,o.user)?"active":""}`,onClick:()=>a(o.user),children:[e(j,{}),e("small",{className:"text-muted d-block",children:m.user})]})]}):e(p,{children:r("button",{className:"btn",onClick:()=>{},children:[e(B,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function Ue(){const{user:t,logout:n}=x(),a=_(),i=v();return e("section",{className:"app-bar-top",children:t?r(p,{children:[r("button",{className:"btn",onClick:()=>i(-1),children:[e(G,{}),e("small",{className:"text-muted align-middle p-2",children:Ae[a.pathname]})]}),e("button",{className:"btn",onClick:()=>n(),children:e(J,{})})]}):e(p,{children:r("button",{className:"btn",children:[e(Q,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function Se({name:t,path:n,icon:a}){const i=v();return r("button",{className:"app-btn-app btn btn-light",onClick:()=>i(n),children:[a,e("small",{className:"text-muted d-block",children:t})]})}function _e(){return e(p,{children:e("section",{id:"apps-container",children:e(Se,{name:m.appTest,path:o.appTest,icon:e(F,{})})})})}function Ce(){const{loginWithGoogle:t,loginAnonymously:n,logout:a}=x();return y.exports.useEffect(()=>{a()},[]),e(p,{children:r("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(z,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(H,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(X,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(Y,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function Ie(){return e(p,{})}var Pe="/hello/assets/anonymous.20c3dde4.png";function Re({user:t,toUserID:n}){return r("section",{className:"app-user-view",children:[e("img",{src:(t==null?void 0:t.photoURL)||Pe,alt:(t==null?void 0:t.displayName)||"Anonymous",className:"user-photo"}),e("h2",{className:"lead mb-4",children:(t==null?void 0:t.displayName)||"Anonymous"}),e("div",{className:"info-block",children:r("button",{className:"btn btn-dark btn-id",onClick:()=>n(),children:[e(K,{}),e("small",{className:"ms-2",children:"Get ID"})]})}),e("div",{className:"info-block",children:r("button",{className:"btn btn-dark btn-id",children:[e(V,{}),e("small",{className:"ms-2",children:"Share"})]})})]})}function Me(){const{user:t}=x(),n=v();return r(p,{children:[e(Re,{user:t,toUserID:()=>n(o.userUid)}),e("ul",{id:"app-user-firends"}),r("aside",{id:"app-add-user",children:[e("button",{className:"app-btn-app btn btn-light",onClick:()=>n(o.userQrs),children:e(Z,{})}),e("button",{className:"app-btn-app btn btn-light",onClick:()=>n(o.userAdd),children:e(ee,{})})]})]})}function Te(){return e(p,{})}function qe(){return e(p,{})}function Ee(){const[t,n]=y.exports.useState("");function a(i,s){if(s)return console.error(s);i&&n(i)}return r(p,{children:[e(te,{className:"user-qr-reader",onResult:a,constraints:{facingMode:"environment",aspectRatio:1}}),e("button",{className:"btn btn-success btn-user-qr-reader",disabled:!t,children:"Add friend"})]})}function We(){const{user:t}=x();return r(p,{children:[e(ne,{value:(t==null?void 0:t.uid)||"",className:"user-qr-code"}),e("button",{className:"btn btn-dark btn-user-qr-code",children:(t==null?void 0:t.uid)||""})]})}const g={x:null,y:null};function Oe(t){g.x=t.touches[0].clientX,g.y=t.touches[0].clientY}function Le(t,n,a,i,s){if(!g.x||!g.y)return;const l=Math.min(window.innerWidth/3,300),u=.33,A=t.touches[0].clientX,h=t.touches[0].clientY,f=g.x-A,d=g.y-h;if(Math.abs(f)>Math.abs(d)){const C=f<=0?1:-1,U=Math.max(1-(Math.abs(f)-Math.abs(d))/l,0),N=C*u*(Math.abs(f)-Math.abs(d));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=U,document.querySelector(n).style.transform=`translateX( ${N}px )`}if(Math.abs(f)>Math.abs(d)&&Math.abs(f)-Math.abs(d)>l){const U=a.length-1,N=a.indexOf(i.pathname.split(/\b\//)[0]);if(N===-1)return;if(f<0&&N-1>=0)return s(a[N-1]);if(f>0&&N+1<=U)return s(a[N+1])}}function De(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,g.x=null,g.y=null}function je(){const{user:t}=x(),n=_(),a=v();function i(u){Oe(u)}function s(u){Le(u,"#app-main-content",[o.news,o.apps,o.user],n,a)}function l(u){De(u,"#app-main-content")}return e("main",{id:"app-main-content",onTouchStart:i,onTouchMove:s,onTouchEnd:l,children:r(ae,{children:[e(b,{exact:!0,path:o.login,element:e(Ce,{})}),t&&r(p,{children:[e(b,{exact:!0,path:o.news,element:e(Ie,{})}),e(b,{exact:!0,path:o.apps,element:e(_e,{})}),e(b,{exact:!0,path:o.appTest,element:e(Te,{})}),e(b,{exact:!0,path:o.user,element:e(Me,{})}),e(b,{exact:!0,path:o.userAdd,element:e(qe,{})}),e(b,{exact:!0,path:o.userQrs,element:e(Ee,{})}),e(b,{exact:!0,path:o.userUid,element:e(We,{})})]}),e(b,{path:"*",element:e(se,{replace:!0,to:o.login})})]})},n.pathname)}function Be({installPWA:t,dismiss:n}){return r("section",{className:"app-pwa-install",children:[r("button",{className:"btn btn-dark shadow",onClick:()=>t(),children:[e(oe,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),r("button",{className:"btn btn-secondary shadow",onClick:()=>n(),children:[e(re,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function Ge(){const[t,n]=y.exports.useState(!1);async function a(){const s=await I();s.prompt();const{outcome:l}=await s.userChoice;l==="accepted"&&i()}function i(){n(!1)}return y.exports.useEffect(async()=>{await I(),n(!0)},[]),e(p,{children:e(le,{children:r(ke,{children:[e(Ue,{}),t&&e(Be,{installPWA:a,dismiss:i}),e(je,{}),e($e,{})]})})})}ie.render(e(ce.StrictMode,{children:e(Ge,{})}),document.getElementById("root"));
