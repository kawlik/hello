import{v as R,i as T,g as U,G as W,s as E,a as O,r as g,u as v,j as e,b as C,c as o,F as p,d as L,e as q,f as G,h as J,k as j,l as B,m as D,n as F,o as z,p as H,q as X,t as Y,R as K,w as y,N as V,x as Q,y as Z,H as ee,z as te,A as ne}from"./vendor.9ad066d0.js";const ae=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}};ae();function se(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:s,onRegisterError:r}=t;let l;const N=async(m=!0)=>{};return"serviceWorker"in navigator&&(l=new R("/hello/sw.js",{scope:"/hello/",type:"classic"}),l.addEventListener("activated",m=>{m.isUpdate?window.location.reload():i==null||i()}),l.register({immediate:n}).then(m=>{s==null||s(m)}).catch(m=>{r==null||r(m)})),N}se({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let x=null;const oe=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),x=t,window.dispatchEvent(oe)});async function _(){return new Promise((t,n)=>{if(x)return t(x);window.addEventListener("isInstallPromptReady",a=>t(x))})}var re={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};T(re);const I=U();async function le(t){let n=null;try{n=await O(I,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function ce(){const t=new W;return await le(t)}async function ie(){let t=null;try{t=await E(I)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var w={namespace:"hello",namespaces:{user:"user"}};function ue(t,n){const a=w.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function de(t){const n=w.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function pe(t){const n=w.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function me(t){const n=w.namespaces.user;ue(n,t)}function he(){const t=w.namespaces.user;return de(t)}function fe(){const t=w.namespaces.user;return pe(t)}var d={login:{name:"Login",path:"/login"},news:{name:"News",path:"/news"},user:{name:"User",path:"/user"},apps:{name:"Apps",path:"/apps",list:{test:{name:"Test",path:"/test"}}}};function be(t){return d.apps.path+t.path}const c={login:d.login.path,news:d.news.path,user:d.user.path,apps:d.apps.path,appTest:be(d.apps.list.test)},$={login:d.login.name,news:d.news.name,user:d.user.name,apps:d.apps.name,appTest:d.apps.list.test.name};function S(t,n){return Boolean(t.pathname.match(n))}const M=g.exports.createContext();function A(){return g.exports.useContext(M)}function ge({children:t}){const n=v(),[a,i]=g.exports.useState(null);function s(u){!u||(i(u),n(c.apps))}async function r(){const u=await ce();s(u)}async function l(){const u=await ie();s(u)}function N(){!a||(i(null),fe())}function m(){a&&me(a)}function h(){if(!a){const u=he();s(u)}}return g.exports.useEffect(()=>{m(),h()},[a]),e(M.Provider,{value:{user:a,loginWithGoogle:r,loginAnonymously:l,logout:N},children:t})}function ye(){const{user:t}=A(),n=C(),a=v();return e("section",{className:"app-bar-bottom",children:t?o(p,{children:[o("button",{className:`btn ${S(n,c.news)?"active":""}`,onClick:()=>a(c.news),children:[e(L,{}),e("small",{className:"text-muted d-block",children:$.news})]}),o("button",{className:`btn ${S(n,c.apps)?"active":""}`,onClick:()=>a(c.apps),children:[e(q,{}),e("small",{className:"text-muted d-block",children:$.apps})]}),o("button",{className:`btn ${S(n,c.user)?"active":""}`,onClick:()=>a(c.user),children:[e(G,{}),e("small",{className:"text-muted d-block",children:$.user})]})]}):e(p,{children:o("button",{className:"btn",onClick:()=>{},children:[e(J,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function we(){const{user:t,logout:n}=A(),a=v();return e("section",{className:"app-bar-top",children:t?o(p,{children:[o("button",{className:"btn",onClick:()=>a(-1),children:[e(j,{}),e("small",{className:"text-muted align-middle p-2",children:"Go back"})]}),e("button",{className:"btn",onClick:()=>n(),children:e(B,{})})]}):e(p,{children:o("button",{className:"btn",children:[e(D,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function Ne(){const t=v();return o(p,{children:[e("h2",{children:"Apps"}),e("hr",{className:"mt-0"}),e("section",{id:"apps-container",children:o("button",{className:"btn btn-light",onClick:()=>t(c.appTest),children:[e(F,{}),e("small",{className:"text-muted d-block",children:"Test App"})]})})]})}function ve(){const{loginWithGoogle:t,loginAnonymously:n,logout:a}=A();return g.exports.useEffect(()=>{a()},[]),e(p,{children:o("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(z,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(H,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(X,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(Y,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function xe(){return o(p,{children:[e("h2",{children:"News"}),e("hr",{className:"mt-0"})]})}function Ae(){return o(p,{children:[e("h2",{children:"User"}),e("hr",{className:"mt-0"})]})}function ke(){return o(p,{children:[e("h2",{children:"Test App"}),e("hr",{className:"mt-0"})]})}const f={x:null,y:null};function $e(t){f.x=t.touches[0].clientX,f.y=t.touches[0].clientY}function Se(t,n,a,i,s){if(!f.x||!f.y)return;const r=Math.min(window.innerWidth/3,300),l=.33,N=t.touches[0].clientX,m=t.touches[0].clientY,h=f.x-N,u=f.y-m;if(Math.abs(h)>Math.abs(u)){const P=h<=0?1:-1,k=Math.max(1-(Math.abs(h)-Math.abs(u))/r,0),b=P*l*(Math.abs(h)-Math.abs(u));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=k,document.querySelector(n).style.transform=`translateX( ${b}px )`}if(Math.abs(h)>Math.abs(u)&&Math.abs(h)-Math.abs(u)>r){const k=a.length-1,b=a.indexOf(i.pathname.split(/\b\//)[0]);if(b===-1)return;if(h<0&&b-1>=0)return s(a[b-1]);if(h>0&&b+1<=k)return s(a[b+1])}}function Pe(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,f.x=null,f.y=null}function _e(){const{user:t}=A(),n=C(),a=v();function i(l){$e(l)}function s(l){Se(l,"#app-main-content",[c.news,c.apps,c.user],n,a)}function r(l){Pe(l,"#app-main-content")}return e("main",{id:"app-main-content",onTouchStart:i,onTouchMove:s,onTouchEnd:r,children:o(K,{children:[e(y,{exact:!0,path:c.login,element:e(ve,{})}),t&&o(p,{children:[e(y,{exact:!0,path:c.news,element:e(xe,{})}),e(y,{exact:!0,path:c.user,element:e(Ae,{})}),e(y,{exact:!0,path:c.apps,element:e(Ne,{})}),e(y,{exact:!0,path:c.appTest,element:e(ke,{})})]}),e(y,{path:"*",element:e(V,{replace:!0,to:c.login})})]})},n.pathname)}function Ce({installPWA:t,dismiss:n}){return o("section",{className:"app-pwa-install",children:[o("button",{className:"btn btn-dark shadow",onClick:()=>t(),children:[e(Q,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),o("button",{className:"btn btn-secondary shadow",onClick:()=>n(),children:[e(Z,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function Ie(){const[t,n]=g.exports.useState(!1);async function a(){const s=await _();s.prompt();const{outcome:r}=await s.userChoice;r==="accepted"&&i()}function i(){n(!1)}return g.exports.useEffect(async()=>{await _(),n(!0)},[]),e(p,{children:e(ee,{children:o(ge,{children:[e(we,{}),t&&e(Ce,{installPWA:a,dismiss:i}),e(_e,{}),e(ye,{})]})})})}te.render(e(ne.StrictMode,{children:e(Ie,{})}),document.getElementById("root"));
