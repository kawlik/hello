import{v as _,i as C,g as I,G as R,s as W,a as E,r as h,j as e,u as $,b as N,c as l,F as d,d as O,e as T,f as U,h as L,k as q,l as G,m as J,n as j,o as B,p as D,q as F,t as z,R as H,w as b,N as X,x as Y,y as K,H as V,z as Q,A as Z}from"./vendor.a6ad99c2.js";const ee=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}};ee();function te(t={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:s,onRegisterError:o}=t;let c;const y=async(u=!0)=>{};return"serviceWorker"in navigator&&(c=new _("/hello/sw.js",{scope:"/hello/",type:"classic"}),c.addEventListener("activated",u=>{u.isUpdate?window.location.reload():i==null||i()}),c.register({immediate:n}).then(u=>{s==null||s(u)}).catch(u=>{o==null||o(u)})),y}te({onOfflineReady(){console.log("PWA is offline ready.")},onNeedRefresh(){console.log("PWA needs refresh.")}});let x=null;const ne=new Event("isInstallPromptReady");window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),x=t,window.dispatchEvent(ne)});async function P(){return new Promise((t,n)=>{if(x)return t(x);window.addEventListener("isInstallPromptReady",a=>t(x))})}var ae={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};C(ae);const S=I();async function se(t){let n=null;try{n=await E(S,t)}catch(a){console.error(a)}finally{return(n==null?void 0:n.user)||null}}async function oe(){const t=new R;return await se(t)}async function le(){let t=null;try{t=await W(S)}catch(n){console.error(n)}finally{return(t==null?void 0:t.user)||null}}var g={namespace:"hello",namespaces:{user:"user"}};function re(t,n){const a=g.namespace+"."+t;localStorage.setItem(a,JSON.stringify(n))}function ie(t){const n=g.namespace+"."+t,a=localStorage.getItem(n);return JSON.parse(a)||null}function ce(t){const n=g.namespace+"."+t;localStorage.getItem(n)!==null&&localStorage.removeItem(n)}function ue(t){const n=g.namespaces.user;re(n,t)}function de(){const t=g.namespaces.user;return ie(t)}function me(){const t=g.namespaces.user;return ce(t)}const M=h.exports.createContext();function w(){return h.exports.useContext(M)}function pe({children:t}){const[n,a]=h.exports.useState(null);async function i(){const u=await oe();u&&a(u)}async function s(){const u=await le();u&&a(u)}function o(){a(null),me()}function c(){n&&ue(n)}function y(){if(!n){const u=de();u&&a(u)}}return h.exports.useEffect(()=>{c(),y()},[n]),e(M.Provider,{value:{user:n,loginWithGoogle:i,loginAnonymously:s,logout:o},children:t})}var r={login:"/login",profile:"/profile",messages:"/messages",apps:"/apps",appTest:"/test"};function he(){const{user:t}=w(),n=$(),a=N();return e("section",{className:"app-bar-bottom",children:t?l(d,{children:[l("button",{className:`btn ${n.pathname.match(r.messages)?"active":""}`,onClick:()=>a(r.messages),children:[e(O,{}),e("small",{className:"text-muted d-block",children:"Messages"})]}),l("button",{className:`btn ${n.pathname.match(r.apps)?"active":""}`,onClick:()=>a(r.apps),children:[e(T,{}),e("small",{className:"text-muted d-block",children:"Apps"})]}),l("button",{className:`btn ${n.pathname.match(r.profile)?"active":""}`,onClick:()=>a(r.profile),children:[e(U,{}),e("small",{className:"text-muted d-block",children:"Profile"})]})]}):e(d,{children:l("button",{className:"btn",onClick:()=>{},children:[e(L,{}),e("small",{className:"text-muted d-block",children:"Our policy"})]})})},t)}function fe(){const{user:t,logout:n}=w(),a=N();return e("section",{className:"app-bar-top",children:t?l(d,{children:[l("button",{className:"btn",onClick:()=>a(-1),children:[e(q,{}),e("small",{className:"text-muted align-middle p-2",children:"Go back"})]}),e("button",{className:"btn",onClick:()=>n(),children:e(G,{})})]}):e(d,{children:l("button",{className:"btn",children:[e(J,{}),e("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},t)}function be(){const t=N();return l(d,{children:[e("h2",{children:"Apps"}),e("hr",{className:"mt-0"}),e("section",{id:"apps-container",children:l("button",{className:"btn btn-light",onClick:()=>t(r.apps+r.appTest),children:[e(j,{}),e("small",{className:"text-muted d-block",children:"Test App"})]})})]})}function ge(){const{loginWithGoogle:t,loginAnonymously:n}=w();return e(d,{children:l("div",{id:"app-login-form",children:[e("h2",{className:"fw-bold mb-0",children:"Join for free"}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[e(B,{}),e("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",onClick:t,children:[e(D,{}),e("span",{className:"align-middle p-2",children:"Join with Google"})]}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[e(F,{}),e("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),e("hr",{className:"my-3"}),e("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),l("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:n,children:[e(z,{}),e("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})})}function ye(){return l(d,{children:[e("h2",{children:"Messages"}),e("hr",{className:"mt-0"})]})}function ve(){return l(d,{children:[e("h2",{children:"Profile"}),e("hr",{className:"mt-0"})]})}function xe(){return l(d,{children:[e("h2",{children:"Test App"}),e("hr",{className:"mt-0"})]})}const p={x:null,y:null};function Ne(t){p.x=t.touches[0].clientX,p.y=t.touches[0].clientY}function we(t,n,a,i,s){if(!p.x||!p.y)return;const o=Math.min(window.innerWidth/3,300),c=.33,y=t.touches[0].clientX,u=t.touches[0].clientY,m=p.x-y,v=p.y-u;if(Math.abs(m)>Math.abs(v)){const k=m<=0?1:-1,A=Math.max(1-(Math.abs(m)-Math.abs(v))/o,0),f=k*c*(Math.abs(m)-Math.abs(v));document.querySelector(n).style.transition=null,document.querySelector(n).style.opacity=A,document.querySelector(n).style.transform=`translateX( ${f}px )`}if(Math.abs(m)>Math.abs(v)&&Math.abs(m)-Math.abs(v)>o){const A=i.length-1,f=i.indexOf(a);if(m<0&&f-1>=0)return s(i[f-1]);if(m>0&&f+1<=A)return s(i[f+1])}}function Ae(t,n){document.querySelector(n).style.opacity=1,document.querySelector(n).style.transition="all ease 300ms",document.querySelector(n).style.transform=null,p.x=null,p.y=null}function ke(){const{user:t}=w(),n=$(),a=N();function i(c){Ne(c)}function s(c){we(c,"#app-main-content",n.pathname.split(/\b\//)[0],[r.messages,r.apps,r.profile],a)}function o(c){Ae(c,"#app-main-content")}return h.exports.useEffect(()=>{a(t?r.apps:r.login)},[t]),e("main",{id:"app-main-content",onTouchStart:i,onTouchMove:s,onTouchEnd:o,children:l(H,{children:[e(b,{exact:!0,path:r.login,element:e(ge,{})}),e(b,{exact:!0,path:r.messages,element:e(ye,{})}),e(b,{exact:!0,path:r.apps,element:e(be,{})}),e(b,{exact:!0,path:r.apps+r.appTest,element:e(xe,{})}),e(b,{exact:!0,path:r.profile,element:e(ve,{})}),e(b,{path:"*",element:e(X,{replace:!0,to:r.login})})]})},n.pathname)}function Pe({installPWA:t,dismiss:n}){return l("section",{className:"app-pwa-install",children:[l("button",{className:"btn btn-outline-dark",onClick:()=>t(),children:[e(Y,{}),e("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),l("button",{className:"btn btn-outline-secondary",onClick:()=>n(),children:[e(K,{}),e("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})}function $e(){const[t,n]=h.exports.useState(!1);async function a(){const s=await P();s.prompt();const{outcome:o}=await s.userChoice;o==="accepted"&&i()}function i(){n(!1)}return h.exports.useEffect(async()=>{await P(),n(!0)},[]),e(d,{children:e(V,{children:l(pe,{children:[e(fe,{}),t&&e(Pe,{installPWA:a,dismiss:i}),e(ke,{}),e(he,{})]})})})}Q.render(e(Z.StrictMode,{children:e($e,{})}),document.getElementById("root"));
